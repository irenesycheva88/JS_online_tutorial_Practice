<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<script src="https://js.cx/test/libs.js"></script>
</head>
<body>

	<script>
	// Функция - строковый буфер

	'use strict';
	
	// Моё решение
	function makeBuffer() {

		var buffer = "";

		return function(str) {

			if (str === undefined)
				return buffer;
			else
				buffer += str;
		}
	}
	
	/*
	// Решение из учебника
	function makeBuffer() {
		var text = '';

		return function(piece) {
			if (arguments.length == 0) { // вызов без аргументов
				return text;
			}
			text += piece;
		};
	};
	*/
	
	var buffer;
	beforeEach(function() {
		buffer = makeBuffer();
	});

	it("возвращает пустую строку по умолчанию", function() {
			assert.strictEqual(buffer(), "");
	});

	it("добавляет аргументы в буффер", function() {
		buffer('Замыкания');
		buffer(' Использовать');
		buffer(' Нужно!');
		assert.equal(buffer(), 'Замыкания Использовать Нужно!');
	});

	it("приводит всё к строке", function() {
		buffer(null);
		buffer(false);
		assert.equal(buffer(), "nullfalse");
	});
</script>

</body>
</html>